# values-local-docker.yaml
# This file contains configurations for running the Starlight Helm Stack on Docker Desktop.

# -- Image repositories and tags for local development.
#    These images should be built locally as described in README.md.
image:
  frontend:
    repository: stargate-frontend
    tag: latest
    pullPolicy: IfNotPresent
  stargate:
    repository: stargate-backend
    tag: latest
    pullPolicy: IfNotPresent
  starlight:
    repository: starlight-api
    tag: latest
    pullPolicy: IfNotPresent
  ipfs:
    repository: ipfs/kubo
    tag: "v0.27.0"
    pullPolicy: IfNotPresent
  postgres:
    repository: postgres
    tag: "15"
    pullPolicy: IfNotPresent

# -- PostgreSQL settings (using default embedded Postgres)
postgres:
  user: stargate
  password: stargate
  database: stargate
  port: 5432
  storage: 1Gi # Small storage for local development

# -- Stargate backend settings
stargate:
  storage: postgres
  pgDsn: "postgres://stargate:stargate@stargate-postgres:5432/stargate?sslmode=disable"
  port: 3001
  proxyBase: "http://starlight-api:8080" # Points to local starlight-api service
  blocksStorage: 1Gi # Small storage for local development
  storageClass: "" # No specific storage class needed for local
  ingestToken: "" # Will be sourced from secrets if secrets.createDefault is false
  apiKey: "demo-api-key"      # Will be sourced from secrets if secrets.createDefault is false
  bitcoinNetwork: "testnet4"
  donationAddress: "tb1qqyf4y2zeqepmr3fd8gzsal5vhv7tfqjye0lghk"
  ipfs:
    mirrorEnabled: true
    mirrorUploadEnabled: true
    mirrorDownloadEnabled: true
    apiUrl: "http://stargate-ipfs:5001"
    mirrorTopic: "stargate-uploads"
    mirrorPollIntervalSec: 10
    mirrorPublishIntervalSec: 30
    mirrorMaxFiles: 2000
    httpTimeoutSec: 30

ipfs:
  enabled: true
  enablePubsub: true
  apiPort: 5001
  gatewayPort: 8080
  swarmPort: 4001
  storage: 2Gi
  storageClass: ""

# -- MCP (Master Control Program) settings
mcp:
  claimTtlHours: 72
  store: postgres # Use postgres for consistency with production setup
  pgDsn: "postgres://stargate:stargate@stargate-postgres:5432/stargate?sslmode=disable"
  seedFixtures: false # Set to true to load demo contracts and tasks
  apiKey: "" # Can be empty for local if authentication is disabled, or use a dummy key
  enableIngestSync: true
  enableFundingSync: false
  fundingProvider: ""
  fundingApiBase: ""
  ingestSyncInterval: "30s"

# -- Starlight API settings
starlight:
  port: 8080
  ingestUrl: "http://stargate-backend:3001/api/ingest-inscription" # Points to local stargate-backend service
  ingestToken: "" # Will be sourced from secrets if secrets.createDefault is false
  apiKey: "demo-api-key"      # Will be sourced from secrets if secrets.createDefault is false
  allowAnonymousScan: true # Allow anonymous scanning for easier local development
  stegoCallbackUrl: "http://stargate-backend:3001/api/stego/callback"
  stegoCallbackSecret: "" # Will be sourced from secrets if secrets.createDefault is false

# -- Frontend settings
frontend:
  port: 80

# -- Resource requests and limits for local development (minimal)
resources:
  stargate:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  starlight:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 1
      memory: 1Gi
  ipfs:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 250m
      memory: 256Mi
  frontend:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi
  postgres:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# -- Kubernetes Secrets configuration
#    For Docker Desktop, you can choose to create secrets manually or let Helm create defaults.
secrets:
  createDefault: true # Let Helm create default secrets for convenience
  name: stargate-stack-secrets
  stargateApiKey: "demo-api-key"
  stargateIngestToken: ""
  starlightApiKey: "demo-api-key"
  starlightIngestToken: ""
  starlightStegoCallbackSecret: ""

# -- Horizontal Pod Autoscaler (HPA) settings (disabled for local)
hpa:
  backend:
    enabled: false
  starlight:
    enabled: false

# -- Ingress settings for Docker Desktop
ingress:
  enabled: true # Enable Ingress for local access
  className: "nginx" # Assumes nginx ingress controller in Docker Desktop
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "true" # Force SSL redirect
    nginx.ingress.kubernetes.io/proxy-body-size: "10m" # Default body size
    nginx.ingress.kubernetes.io/enable-access-log: "true"
  frontendHost: starlight.local # Local development domain
  backendHost: stargate.local # Local development domain
  tls:
    - secretName: stargate-stack-tls # Name of the TLS secret provided by user
      hosts:
        - starlight.local
        - stargate.local
  tlsCrt: |
    -----BEGIN CERTIFICATE-----
    MIIEaDCCAtCgAwIBAgIQZsH1Y5cCvH7mdnfLstA/tzANBgkqhkiG9w0BAQsFADCB
    jTEeMBwGA1UEChMVbWtjZXJ0IGRldmVsb3BtZW50IENBMTEwLwYDVQQLDChlcmlj
    QE1hYy5oc2QxLmNhLmNvbWNhc3QubmV0IChFcmljIFlhbmcpMTgwNgYDVQQDDC9t
    a2NlcnQgZXJpY0BNYWMuaHNkMS5jYS5jb21jYXN0Lm5ldCAoRXJpYyBZYW5nKTAe
    Fw0yNTEyMjExNjU4MzNaFw0yODAzMjExNTU4MzNaMFwxJzAlBgNVBAoTHm1rY2Vy
    dCBkZXZlbG9wbWVudCBjZXJ0aWZpY2F0ZTExMC8GA1UECwwoZXJpY0BNYWMuaHNk
    MS5jYS5jb21jYXN0Lm5ldCAoRXJpYyBZYW5nKTCCASIwDQYJKoZIhvcNAQEBBQAD
    ggEPADCCAQoCggEBAM6dI9CRRWoO1GTTii9v2LKpBluU+MOo2c3ruZMJ39Xgl7nK
    6cNjX5ytvgIA0XnZ0bJnCS31+YkgamVa5BSseJwCYrxyXF/QS7sY6oh0iCzeo8w5
    VgIeucS9p/zqQFS5/eOvTqAHBikhMWofomhTfL2/6TEU17CmhNBF8bBKYasyNnRJ
    J1uJGDqCM6p/kCo+7X0XnLWp3xBuEhNVqO0t1QF2cQ9ScMTX0CEi2rfNUUOwkR5p
    h9lSuPNP6tOeBT0QzyZqYxZ9/q41ms/HtG4MonpzPhi804KzmveXjSsJDk8Hqno3
    WcLN8pfB+u1oNS+rFk7EFBhSuKOB35x/NkS89kkCAwEAAaN0MHIwDgYDVR0PAQH/
    BAQDAgWgMBMGA1UdJQQMMAoGCCsGAQUFBwMBMB8GA1UdIwQYMBaAFOnuOULFL8EX
    tZXXNQjGwvkdScvTMCoGA1UdEQQjMCGCD3N0YXJsaWdodC5sb2NhbIIOc3Rhcmdh
    dGUubG9jYWwwDQYJKoZIhvcNAQELBQADggGBAJ5Me3OHe5csG/h8/eQLzn8imMvU
    aQQyjqMx9wUpBqR9dbmmzwQlniDndSY4ymH/0Y83IWP5KXDSRKf9IEpF5LEgfpYw
    0u9/B4Gjt+l6ca1VEPzLU7uEqsaCy6ZbsVZEmx9Zp4qhn6hWYfOUUGdqkYpT7coX
    m01DWPUOeOBPmFIE+QlBaUDYzJbHv2ptBc5Gzjrxeum2g+EOXk6xjQu102ICK9ol
    y3nXrqmTtorNNwacCdM1ajpdUc/MtvLDElZWn04cGmKQeq05m9cAa4cJS22J6CLS
    I8bCUlnht79XfhYsdh6w5Xg0EWt1Tv1rq3BcI3egeKyexBThY9Qm1pnDZOIRuLBd
    OKT4yb2DJ3rCAqJBcwqkEP4E9UKpLr50A1Tqr6NauTwspakTykImul2DO5C78ssr
    CpjD0gDMNF94Zxjcl2+FThXjypOL0ypUjJQaRzUfF4DKw50HylI0gh5X9cnu4HyD
    ysUm+tAKe7cRbZ7KUcVmfL/sHZnrdWx748ZbQQ==
    -----END CERTIFICATE-----
  tlsKey: |
    -----BEGIN PRIVATE KEY-----
    MIIEugIBADANBgkqhkiG9w0BAQEFAASCBKQwggSgAgEAAoIBAQDOnSPQkUVqDtRk
    04ovb9iyqQZblPjDqNnN67mTCd/V4Je5yunDY1+crb4CANF52dGyZwkt9fmJIGpl
    WuQUrHicAmK8clxf0Eu7GOqIdIgs3qPMOVYCHrnEvaf86kBUuf3jr06gBwYpITFq
    H6JoU3y9v+kxFNewpoTQRfGwSmGrMjZ0SSdbiRg6gjOqf5AqPu19F5y1qd8QbhIT
    VajtLdUBdnEPUnDE19AhItq3zVFDsJEeaYfZUrjzT+rTngU9EM8mamMWff6uNZrP
    x7RuDKJ6cz4YvNOCs5r3l40rCQ5PB6p6N1nCzfKXwfrtaDUvqxZOxBQYUrijgd+c
    fzZEvPZJAgMBAAECggEACu0c8n/oMZRgr4dPULRju4j8PNYbNK+mewELAodcZrFW
    nLzqEUrdSMoYWP9FlKHL+NkBj4RpQpLsBXmhw6UeSLPImGocz/VSN+34oyg0dlj8
    xQVIMtsAnHKiIloZ9lESp9qCuCw+62hltlS/cDBwEZHHSXDuehlIP0JfpmC8mwK3
    p4vsSqrxsQCOJDe+Qc8AJEBbWNbUn+xffRmrf+cpTaw4g0XLvJ14WuaJsrccGv6d
    nXGzXrP3wEGTRd7NMAevsq4514FuWAgavL+o2jpdZ1UZzuY/CjIgkm0b+PBozvFo
    MZCpYdmT3dzbIhZJ8cDElVSbebLhAJTxA13nrdQywQKBgQDYhpbiFbHFImJ8dTw6
    l2ThA3zqOXc1AheTWxaFpAf8r4XWs/KPpBazb9sT/lMh5Epui13AX1wqGlxzSCbm
    dIzcBQH1KU7PoVlTs53mvDyonmo7j0pbUOgQ37oURzxwy0W2qDWBQtB0WqRDXCI2
    Rh9g8D7TUolGye3zEZnL71OzIQKBgQD0R/Ra+40/abotOaqjJbI4aA+xdHv6iEpQ
    TA8ByEI/5Fu7PwF6dhKIYTfG7WtHBTrEjrOY6UWwpJfVneOpXiPCf/Fy1wXd94ka
    hkKwUqON9s+pSeZxcKkwySEfSYVj9zsQR3bfDf/9Eg3ttxkxou7UcOFqMEsjVWY7
    Jlo/wFKGKQKBgBVvfZB0RV0Wwlk/4e6K/lmoVr15YuvEgUD9S4V/b6r8VWuj9Odz
    fyvUbwPTsbcxOo0nDuj0h9NDONPQ2MkH0MoXVNJIfJzhhE5dAczN5dNrm2i6Dspr
    gA3rmChZxQoFlak3jdR2INzj/E8O1/Q3jPOz1QRmr2BqrTvbCja+QrMBAoGASUIC
    7/4cf/XvFX0DxWWaqvvaKPer7phM4QPORFSQOaT8NY1Rni4mpKuzFH9C+suAsk2x
    YpwigDT8K93r1nEa/EtuV2hQpB6GCWRWP5ao4fwwjq5Q45hLxQusWTutOyt7lQg5
    h+8k4/o0HyQX9CDOyvsHPtc40WHdBMQdsJy2ovECf0wuC65GsjTwvFXJSyeFBxgD
    kYF4L31DiTPD1EP+qRcuyAYoQiBWBImrCC01WHrbj6Vi6OpSYxH1VUbRLMmfDbmP
    NZMgOhrcEjBpjBaJ7GQFZy2Y9ozkxybNyj9Ss4WzzeDvvttbf0iJI9xuBewTISxR
    vYoTb/nzwVTQKMUw6D4=
    -----END PRIVATE KEY-----

# Custom CA certificate.
# Provide the base64-encoded CA certificate content here.
# For example:
# ca:
#   crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0t...
ca:
  crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUU3RENDQTFTZ0F3SUJBZ0lSQU9VY0phMXBJdW4yL2ZNR0MwakdPTjB3RFFZSktvWklodmNOQVFFTEJRQXcKZ1kweEhqQWNCZ05WQkFvVEZXMXJZMlZ5ZENCa1pYWmxiRzl3YldWdWRDQkRRVEV4TUM4R0ExVUVDd3dvWlhKcApZMEJOWVdNdWFITmtNUzVqWVM1amIyMWpZWE4wTG01bGRDQW9SWEpwWXlCWllXNW5LVEU0TURZR0ExVUVBd3d2CmJXdGpaWEowSUdWeWFXTkFUV0ZqTG1oelpERXVZMkV1WTI5dFkyRnpkQzV1WlhRZ0tFVnlhV01nV1dGdVp5a3cKSGhjTk1qVXhNakF5TWpNMU9USTVXaGNOTXpVeE1qQXlNak0xT1RJNVdqQ0JqVEVlTUJ3R0ExVUVDaE1WYld0agpaWEowSUdSbGRtVnNiM0J0Wlc1MElFTkJNVEV3THdZRFZRUUxEQ2hsY21salFFMWhZeTVvYzJReExtTmhMbU52CmJXTmhjM1F1Ym1WMElDaEZjbWxqSUZsaGJtY3BNVGd3TmdZRFZRUUREQzl0YTJObGNuUWdaWEpwWTBCTllXTXUKYUhOa01TNWpZUzVqYjIxallYTjBMbTVsZENBb1JYSnBZeUJaWVc1bktUQ0NBYUl3RFFZSktvWklodmNOQVFFQgpCUUFEZ2dHUEFEQ0NBWW9DZ2dHQkFNNDN3V214QmJuYmM5ZktuS1lTYXVwZUh4UUJjcDRFbU9IcThudHQxNU5lCjB3TGhPdllBRlNFSzQ0TjJ3ZHBVQUNWdnVIV08zZ0g0dSttR0dENGpmQVdRbHUySWFTYXpDaTFWRy83NFZHZ3QKNW1sVFIxS3YrQ016c05laDRZWjN2OFBmWU5DL0RrOTZBZG9ZK0FnSW9vZk14b3JWZzJSQ2xVTWZWOHpjb1lnZQpKR0Nad0ZyVmxpeFdWaUx6enVnWWFWcWUyVDNtKzVTVi83Z08xcWY2cEhMU2UxSVBMMXVuMVZNdUowdzU3Mm9JCjZrZmxVSmgzQVk1SEhUSlA0bmxJRC9Ka1liMEgxOVkwUFN3MFh6bVc1Rk1KUnZEVldhYUU3VDZFTHQwVFFnbVUKb2ZsSlZMdmRiNU8wYkZ5QVFBU21tQ2RHZTJJL1JnMnowYUhNWkNPbFVaU3NVaHBqa3lZMDJ3Z1YvbnlRcEd1Ygo4NUFYWHRZemdNL3ZINHZqUUNKQlIrZzllZzBNWFJnajNVN0tLN29BNWVNREpVaklxQ2tEeEFaemZTZ3U2Y250CjBJS1FmSkVNbGFLMVZ1dzlGMDg2V0FKUW5yR1RpbE1meVYrQlhncFFCOHBOdElNWlNMV3I5bHZDVlVwR0x3NlAKUDVsWFBFVmY0ZmR5aFFwVVlMNXBUUUlEQVFBQm8wVXdRekFPQmdOVkhROEJBZjhFQkFNQ0FnUXdFZ1lEVlIwVApBUUgvQkFnd0JnRUIvd0lCQURBZEJnTlZIUTRFRmdRVTZlNDVRc1V2d1JlMWxkYzFDTWJDK1IxSnk5TXdEUVlKCktvWklodmNOQVFFTEJRQURnZ0dCQUN1TTlQVzNwOWh0bEU0a0FOelNvalozS1M3OXdES25TRFk4OW5nVkNzK2EKNWlvUHVRNFNOTWowSEk4N0lOTmxFSWU4aERSUXRPM3JYazdxU2hsQXNHUXZtTHc2M1BPU1NDamFwTzA4a28xWgpEcHZ2R2hSU2ROR1dYS0FvQjBNTkdwRjdKTzB2cHhhMjNwSkNkSXlBRW9GYUpzZzZzN3Z3dkNSWmpvWUpqMXlVClJZMTlzeXpzKzh2b0dpcGtBSjM3ZmtKZ1BjTWIrOE1zWXNkeEFPTE8raVBRaWtXTWt6bHBFcFhsSE9XYnNuclIKVFhBWU5JOHlQbzJ0bkFuNmZBNEVSeGpUeXE1UGJqYlpQUDduakYveW5DVnArWXJob3c0MzFob0NHRGhMdmJJYgpLU3cyckZldjllbmhRZHZycTdrS3lIMjNMNStLOXMwYk1vWVU2bDNLNjAvUG1TalZ3T090TXVlN1N5d3laeHNJCnpWN3pIWnZ3UjNqSk1mU3pYbUhsVnY1YUxBM3k5Qjd4NU9HWXhDYTRYNjFtTVQ0Uk0xRnMyVExUR2Y2ZEpaOWoKUk1CVHBCQU1kd1NzWEV1M3FrVmFjdGQ3T25nbmFMVm1sQ2R4cXZHSUhNS2Y0R2x2Kzlla3hmRXU4RmJTb3ZWTgpCOVFETk5nQmhrejFxdDF6Rm9XMkdnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
